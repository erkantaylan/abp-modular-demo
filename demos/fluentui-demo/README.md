# FluentUI Demo

A modular ABP Framework demo application showcasing FluentUI Blazor components, real-time chat with SignalR, and cloud-native orchestration with .NET Aspire.

## Integration Guide

For a comprehensive walkthrough of how this project was built — including FluentUI integration, custom Account UI replacement, external login setup (Google & GitHub), and common issues — see **[GUIDE.md](GUIDE.md)**.

## Prerequisites

- [.NET 10.0 SDK](https://dotnet.microsoft.com/download)
- [Node.js](https://nodejs.org/) (18+)
- [yarn](https://yarnpkg.com/)
- [Docker](https://www.docker.com/) (required for Aspire-managed PostgreSQL)

> PostgreSQL runs automatically via Docker when using Aspire. For manual setup, install PostgreSQL 13+ directly.

## Getting Started

### 1. Install frontend dependencies

```bash
cd demos/fluentui-demo
yarn install
yarn build:css
```

This installs [Bulma](https://bulma.io/) and copies the CSS into the Blazor project's static assets.

### 2. Run with Aspire (recommended)

```bash
dotnet run --project src/FluentUiDemo.AppHost/FluentUiDemo.AppHost.csproj
```

Aspire orchestrates the full stack:
1. **PostgreSQL** container with PgAdmin (data persisted via Docker volume)
2. **DbMigrator** runs EF Core migrations and seeds sample data
3. **Blazor app** starts after migrations complete

Open the Aspire dashboard to see all resources and their endpoints.

### 3. Run without Aspire

Start PostgreSQL manually (or via Docker):

```bash
docker run -d --name fluentui-pg \
  -e POSTGRES_PASSWORD=postgres \
  -p 5432:5432 \
  postgres:16
```

Run the migrator, then the app:

```bash
dotnet run --project src/FluentUiDemo.DbMigrator/FluentUiDemo.DbMigrator.csproj
dotnet run --project src/FluentUiDemo.Blazor/FluentUiDemo.Blazor.csproj
```

The app will be available at `https://localhost:44379`.

### Default credentials

- **Username:** admin
- **Password:** 1q2w3E*

### Connection string

Configured in `src/FluentUiDemo.Blazor/appsettings.json`:

```
Host=localhost;Port=5432;Database=FluentUiDemo;Username=postgres;Password=postgres
```

When running via Aspire, the connection string is injected automatically.

## Adding New Packages

This project uses **yarn** for frontend dependency management.

```bash
# Add a package
yarn add <package-name>

# Remove a package
yarn remove <package-name>
```

For .NET packages, use the standard `dotnet add package` workflow on the relevant `.csproj`.

## Project Structure

```
fluentui-demo/
├── package.json                          # Frontend deps (Bulma via yarn)
├── common.props                          # Shared MSBuild properties
├── FluentUiDemo.slnx                     # Solution file
└── src/
    ├── FluentUiDemo.AppHost/             # .NET Aspire orchestrator
    ├── FluentUiDemo.ServiceDefaults/     # Shared Aspire defaults (OpenTelemetry, health checks)
    ├── FluentUiDemo.Domain.Shared/       # Shared constants, enums, localization resources
    ├── FluentUiDemo.Domain/              # Domain entities and aggregate roots
    ├── FluentUiDemo.Application.Contracts/ # DTOs and application service interfaces
    ├── FluentUiDemo.Application/         # Application service implementations
    ├── FluentUiDemo.EntityFrameworkCore/  # EF Core DbContext, migrations, repository config
    ├── FluentUiDemo.HttpApi/             # REST API controllers (auto-generated by ABP)
    ├── FluentUiDemo.HttpApi.Client/      # HTTP API client proxies
    ├── FluentUiDemo.Blazor/              # Main Blazor Server web application
    ├── FluentUiDemo.DbMigrator/          # Database migration and seed console app
    └── features/                         # Self-contained feature modules
        ├── FluentUiDemo.Features.Todo/
        ├── FluentUiDemo.Features.Chat/
        └── FluentUiDemo.Features.Shopping/
```

The solution follows ABP's [Domain-Driven Design](https://docs.abp.io/en/abp/latest/Domain-Driven-Design) layering conventions. Each feature module contains its own domain entities, application services, EF Core configuration, UI components, localization resources, and permissions.

## Features

### Dashboard (`/dashboard`)

Overview page displaying live metrics from the Todo system:
- Total, completed, in-progress, and not-started todo counts
- Active users, overdue items, and completion rate
- Status distribution bars and recent activity feed

### Todo (`/todos`)

Full CRUD task management with:
- Title, description, due date, and status tracking (Not Started / In Progress / Done)
- Completion tracking (who completed it and when)
- FluentUI DataGrid with sorting and filtering
- Create/edit dialogs, delete confirmation, status badges
- Permission-based access control

### Chat (`/chat`)

Real-time messaging powered by SignalR:
- Live message broadcast to all connected users
- Online user presence tracking
- Message history (in-memory, not persisted)
- User avatars and timestamps

### Shopping (`/shopping`)

Product catalog with shopping cart:
- Browsable product grid with category filtering (Electronics, Clothing, Books, Home, Sports, Food)
- Add-to-cart, quantity adjustment, item removal
- Running total calculation
- Seeded with 8 sample products

## Localization

The application supports **English** (en) and **Turkish** (tr).

Localization JSON files are organized per module:

| Module | Resource path |
|--------|--------------|
| Main app | `FluentUiDemo.Domain.Shared/Localization/FluentUiDemo/` |
| Todo | `features/FluentUiDemo.Features.Todo/Localization/Todo/` |
| Chat | `features/FluentUiDemo.Features.Chat/Localization/Chat/` |
| Shopping | `features/FluentUiDemo.Features.Shopping/Localization/Shopping/` |

### Adding a new language

1. Copy an existing `en.json` to `<language-code>.json` in each localization directory (e.g. `de.json` for German).
2. Translate all string values in the new file.
3. ABP automatically discovers the new JSON resources at runtime — no code changes needed.

Localization is used in Razor components via `@L["Key"]` and in code via `IStringLocalizer<TResource>`.

## Technology Stack

| Layer | Technology |
|-------|-----------|
| Framework | [ABP Framework](https://abp.io/) v10.0 |
| UI Components | [FluentUI Blazor](https://www.fluentui-blazor.net/) v4.13 |
| CSS Framework | [Bulma](https://bulma.io/) v1.0 |
| Runtime | .NET 10.0, Blazor Server (Interactive Server) |
| Database | PostgreSQL with Entity Framework Core 10 |
| Real-time | ASP.NET Core SignalR |
| Orchestration | [.NET Aspire](https://learn.microsoft.com/en-us/dotnet/aspire/) |
| Auth | OpenIddict (OAuth 2.0 / OpenID Connect) |
| Observability | OpenTelemetry, Serilog, ASP.NET Core Health Checks |
| Mapping | Mapperly (source-generated) |
| API Docs | Swagger / Swashbuckle |
