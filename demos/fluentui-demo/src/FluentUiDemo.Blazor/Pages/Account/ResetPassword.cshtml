@page
@using System.Globalization
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.Extensions.Options
@using Volo.Abp.Account.Localization
@using Volo.Abp.Identity.Localization
@using Volo.Abp.Localization
@model FluentUiDemo.Blazor.Pages.Account.FluentResetPasswordModel
@inject IHtmlLocalizer<AccountResource> L
@inject IHtmlLocalizer<IdentityResource> LI
@inject IOptions<AbpLocalizationOptions> LocalizationOptions
@{
    Layout = null;
    var currentCulture = CultureInfo.CurrentCulture.Name;
    var languages = LocalizationOptions.Value.Languages;
    var currentPageUrl = ViewContext.HttpContext.Request.Path + ViewContext.HttpContext.Request.QueryString;
}
<!DOCTYPE html>
<html lang="@currentCulture">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@L["ResetPassword"] - FluentUI Demo</title>
    <base href="/" />
    <link href="_content/Microsoft.FluentUI.AspNetCore.Components/css/reboot.css" rel="stylesheet" />
    <link href="account-styles.css" rel="stylesheet" />
</head>
<body>
<div class="account-layout">
    <div class="account-card">
        @if (Model.InvalidToken)
        {
            <div class="alert-danger">
                @LI["Volo.Abp.Identity:InvalidToken"]
            </div>
        }
        else
        {
            <h4>@L["ResetPassword"]</h4>
            <form method="post" class="account-form">
                <p class="info-text">@L["ResetPassword_Information"]</p>

                <input asp-for="UserId" type="hidden" />
                <input asp-for="ResetToken" type="hidden" />

                <div class="form-field">
                    <label asp-for="Password"></label>
                    <input asp-for="Password" type="password" autocomplete="new-password" autofocus />
                    <span asp-validation-for="Password" class="validation-error"></span>
                </div>

                <div class="form-field">
                    <label asp-for="ConfirmPassword"></label>
                    <input asp-for="ConfirmPassword" type="password" autocomplete="new-password" />
                    <span asp-validation-for="ConfirmPassword" class="validation-error"></span>
                </div>

                <div class="buttons">
                    <button type="submit" class="btn-primary">@L["Submit"]</button>
                    <a href="@Url.Page("./Login")" class="btn-secondary" style="text-align:center;">@L["Cancel"]</a>
                </div>
            </form>
        }
    </div>
    @if (languages.Count > 1)
    {
        <div class="language-switcher">
            @foreach (var language in languages)
            {
                var activeClass = language.CultureName == currentCulture ? "active" : "";
                <a href="/culture/switch?culture=@Uri.EscapeDataString(language.CultureName)&returnUrl=@Uri.EscapeDataString(currentPageUrl)" class="language-link @activeClass">@language.DisplayName</a>
            }
        </div>
    }
</div>
</body>
</html>
